<div class="registro-container">
  <form [formGroup]="registrationForm" (ngSubmit)="onSubmit()" class="registro-form">
    <h2>Registro de Usuario</h2>
    
    <div class="form-group">
      <label for="username">Nombre de usuario</label>
      <input type="text" id="username" formControlName="username" placeholder="Introduce tu nombre de usuario">
      <div class="input-specifications">
        <p>Especificaciones:</p>
        <ul>
          <li>Mínimo 3 caracteres</li>
          <li>Solo letras, números, guiones y guiones bajos</li>
        </ul>
      </div>
      <div class="error-messages" *ngIf="f['username'].touched && f['username'].errors">
        <span *ngIf="f['username'].errors['required']">El nombre de usuario es requerido</span>
        <span *ngIf="f['username'].errors['minlength']">Debe tener al menos 3 caracteres</span>
        <span *ngIf="f['username'].errors['pattern']">Solo se permiten letras, números, guiones y guiones bajos</span>
      </div>
    </div>

    <div class="form-group">
      <label for="password">Contraseña</label>
      <input type="password" id="password" formControlName="password" placeholder="Introduce tu contraseña">
      <div class="input-specifications">
        <p>Especificaciones:</p>
        <ul>
          <li>Mínimo 8 caracteres</li>
          <li>Debe contener al menos:</li>
          <li>- Una letra mayúscula o minúscula</li>
          <li>- Un número</li>
          <li>- Un carácter especial (@, $, !, %, *, #, ?, &)</li>
        </ul>
      </div>
      <div class="error-messages" *ngIf="f['password'].touched && f['password'].errors">
        <span *ngIf="f['password'].errors['required']">La contraseña es requerida</span>
        <span *ngIf="f['password'].errors['minlength']">Debe tener al menos 8 caracteres</span>
        <span *ngIf="f['password'].errors['pattern']">Debe contener letras, números y un carácter especial</span>
      </div>
    </div>

    <div class="form-group">
      <label for="password_repeat">Repetir Contraseña</label>
      <input type="password" id="password_repeat" formControlName="passwordRepeat" placeholder="Repite tu contraseña">
      <div class="input-specifications">
        <p>Especificaciones:</p>
        <ul>
          <li>Debe coincidir exactamente con la contraseña ingresada anteriormente</li>
        </ul>
      </div>
      <div class="error-messages" *ngIf="f['passwordRepeat'].touched && registrationForm.errors">
        <span *ngIf="registrationForm.errors['passwordMismatch']">Las contraseñas no coinciden</span>
      </div>
    </div>

    <div class="form-group">
      <label for="nombre">Nombre</label>
      <input type="text" id="nombre" formControlName="nombre" placeholder="Introduce tu nombre">
      <div class="input-specifications">
        <p>Especificaciones:</p>
        <ul>
          <li>Mínimo 2 caracteres</li>
          <li>Solo se permiten letras (incluye caracteres acentuados)</li>
        </ul>
      </div>
      <div class="error-messages" *ngIf="f['nombre'].touched && f['nombre'].errors">
        <span *ngIf="f['nombre'].errors['required']">El nombre es requerido</span>
        <span *ngIf="f['nombre'].errors['minlength']">Debe tener al menos 2 caracteres</span>
        <span *ngIf="f['nombre'].errors['pattern']">Solo se permiten letras</span>
      </div>
    </div>

    <div class="form-group">
      <label for="apellido">Apellido</label>
      <input type="text" id="apellido" formControlName="apellido" placeholder="Introduce tu apellido">
      <div class="input-specifications">
        <p>Especificaciones:</p>
        <ul>
          <li>Mínimo 2 caracteres</li>
          <li>Solo se permiten letras (incluye caracteres acentuados)</li>
        </ul>
      </div>
      <div class="error-messages" *ngIf="f['apellido'].touched && f['apellido'].errors">
        <span *ngIf="f['apellido'].errors['required']">El apellido es requerido</span>
        <span *ngIf="f['apellido'].errors['minlength']">Debe tener al menos 2 caracteres</span>
        <span *ngIf="f['apellido'].errors['pattern']">Solo se permiten letras</span>
      </div>
    </div>

    <div class="form-group">
      <label for="email">Correo electrónico</label>
      <input type="email" id="email" formControlName="email" placeholder="ejemplo@dominio.com">
      <div class="input-specifications">
        <p>Especificaciones:</p>
        <ul>
          <li>Debe ser un correo electrónico válido</li>
          <li>Ejemplo: nombre@dominio.com</li>
          <li>Debe contener @ y un dominio válido</li>
        </ul>
      </div>
      <div class="error-messages" *ngIf="f['email'].touched && f['email'].errors">
        <span *ngIf="f['email'].errors['required']">El email es requerido</span>
        <span *ngIf="f['email'].errors['email'] || f['email'].errors['pattern']">Email inválido</span>
      </div>
    </div>

    <div class="form-group">
      <label for="dni">DNI</label>
      <input type="text" id="dni" formControlName="dni" placeholder="Introduce tu número de DNI">
      <div class="input-specifications">
        <p>Especificaciones:</p>
        <ul>
          <li>Debe contener exactamente 8 dígitos</li>
          <li>Solo se permiten números</li>
        </ul>
      </div>
      <div class="error-messages" *ngIf="f['dni'].touched && f['dni'].errors">
        <span *ngIf="f['dni'].errors['required']">El DNI es requerido</span>
        <span *ngIf="f['dni'].errors['pattern']">Debe ser un número de 8 dígitos</span>
      </div>
    </div>

    <div class="form-group">
      <label for="fecha_nacimiento">Fecha de nacimiento</label>
      <input type="date" id="fecha_nacimiento" formControlName="fecha_nacimiento">
      <div class="input-specifications">
        <p>Especificaciones:</p>
        <ul>
          <li>Debe ser mayor de 18 años para registrarse</li>
          <li>Seleccione su fecha de nacimiento completa</li>
        </ul>
      </div>
      <div class="error-messages" *ngIf="f['fecha_nacimiento'].touched && f['fecha_nacimiento'].errors">
        <span *ngIf="f['fecha_nacimiento'].errors['required']">La fecha de nacimiento es requerida</span>
        <span *ngIf="f['fecha_nacimiento'].errors['edadMinima']">Debes ser mayor de 18 años</span>
      </div>
    </div>

    <button type="submit" [disabled]="!registrationForm.valid">Registrarse</button>
    
    <div *ngIf="errorMessage" class="error-global">
      {{ errorMessage }}
    </div>
    
    <p class="login-link">¿Ya tienes una cuenta? <a routerLink="/login">Inicia sesión</a></p>
  </form>
</div>